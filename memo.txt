# main.tfがあるディレクトリに移動
cd .\env\dev\ ; ls

# ログイン
az login

# サブスクリプションidの取得
az account show --query id --output tsv

# 環境変数サブスクリプションの設定
$env:ARM_SUBSCRIPTION_ID = "<取得したID>"

# terrafornの初期化
terraform init

# プランの作成
terraform plan

# 適用
terraform apply -auto-approve

# 削除
terraform destroy -auto-approve

#######################
# formatting
https://marketplace.visualstudio.com/items?itemName=hashicorp.terraform#formatting

# for_each_subnet
https://letmetechyou.com/how-to-create-an-azurerm-subnet-using-for_each-in-terraform/

# for_each_nsg
https://thomasthornton.cloud/2020/08/05/network-security-group-rule-creation-using-terraform/

# nsg rule
https://zenn.dev/yotan/articles/fd16664367ba38

#################
https://learn.microsoft.com/en-us/azure/virtual-machines/linux/tutorial-automate-vm-deployment
https://cloudinit.readthedocs.io/en/latest/tutorial/lxd.html#tutorial-lxd
https://learn.microsoft.com/en-us/azure/virtual-machines/linux/cloudinit-bash-script
https://github.com/hashicorp/terraform-provider-azurerm/blob/main/examples/virtual-machines/linux/custom-data/main.tf